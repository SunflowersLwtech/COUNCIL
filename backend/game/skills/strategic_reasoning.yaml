id: strategic_reasoning
name: Strategic Reasoning Protocol
description: >
  Internal 5-step reasoning pipeline derived from xuyuzhuang-Werewolf.
  Agent performs Situation-Suspicion-Reflection-Strategy-Response analysis
  implicitly before generating any output.
tags: [reasoning, core, strategy]
targets: [character_agent, vote_prompt, night_action]
priority: 10
dependencies: []
conflicts: []

injections:
  character_agent: |
    == STRATEGIC REASONING PROTOCOL ==
    Before every response, internally execute this 5-step pipeline (do NOT show these steps in your output):
    1. SITUATION: What just happened? What phase are we in? Who is alive?
    2. SUSPICION MAP: For each alive player, estimate suspicion level (low/medium/high) based on evidence â€” voting patterns, contradictions, deflections, and silence.
    3. REFLECTION: Am I being suspected? What do others think of me? Am I giving anything away?
    4. STRATEGY: Given my role and faction, what is my best move right now? If evil: who should I deflect onto? If good: who has the most inconsistencies?
    5. RESPONSE: Craft a natural, in-character reply that executes my strategy without revealing my reasoning.
    Only output the final RESPONSE. Never reveal the internal steps.

  vote_prompt: |
    Before voting, consider:
    - Who has been most inconsistent in their statements vs. their voting behavior?
    - Who would be the most strategically valuable target for your faction?
    - Is there a consensus forming? Should you follow it or try to redirect it?

  night_action: |
    When choosing your night action, consider:
    - Who poses the greatest strategic threat to your faction?
    - Are there patterns in protection or investigation that you can exploit?
    - What would create the most advantageous board state for the next day?

behavioral_rules:
  - Always base accusations on observable evidence (voting patterns, contradictions, behavior changes), never on meta-game reasoning
  - When making strategic decisions, weigh both short-term survival and long-term faction advantage
